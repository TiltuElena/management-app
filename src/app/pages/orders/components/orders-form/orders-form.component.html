<div class="add-element">
  <button
    class="button-new"
    mat-raised-button
    aria-label="add"
    (click)="enterAddMode()"
  >
    <mat-icon>add</mat-icon>
    Add new order
  </button>
  <div *ngIf="show$ | async">
    <form [formGroup]="addForm" class="add-form">
      <mat-form-field appearance="outline">
        <mat-label>Customer</mat-label>
        <mat-select formControlName="customer" required>
          <mat-option
            *ngFor="let customer of customers"
            [value]="customer.value"
            >{{ customer.viewValue }}</mat-option
          >
        </mat-select>
        <mat-error *ngIf="addForm.controls['customer'].invalid">{{
          getErrorRequiredMessage()
        }}</mat-error>
      </mat-form-field>

      <button mat-raised-button class="submit" (click)="openDialog()">Add products</button>

      <mat-form-field class="date" appearance="outline">
        <mat-label>Choose a date</mat-label>
        <input
          matInput
          placeholder="DD/MM/YYYY"
          [matDatepicker]="picker"
          formControlName="date"
          required
        />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <button
        mat-button
        class="submit"
        *ngIf="isInAddMode$ | async"
        [disabled]="!addForm.valid  || products$.getValue().length < 1"
        (click)="addOrder()"
      >
        Add
      </button>

      <button
        mat-button
        class="submit"
        *ngIf="isInEditMode$ | async"
        [disabled]="!addForm.valid || products$.getValue().length < 1"
        (click)="editOrder()"
      >
        Edit
      </button>
    </form>
  </div>
</div>
